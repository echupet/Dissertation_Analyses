---
title: "SCID_scoring"
author: "Elena Peterson"
date: "2024-04-07"
output: html_document
---

Script for summarizing SCID diagnoses

```{r}
library(dplyr)

scid = read.csv("../Data/SCID_Data/RRAY_SCIDScore_April+7,+2024_12.50_char_forR_cleaned.csv",stringsAsFactors = FALSE, header = TRUE)
```


```{r}
# trim subject IDs to match other formats
head(names(scid))
scid$participant = substr(scid$Subject.ID.,1,7)

# initialize new data frame with list of particiapnts
sublist = sort(unique(scid$participant))
sublist = sublist[nchar(sublist)==7]
scored = data.frame("participant" = sublist, "index"=1:length(sublist))

```


```{r}
# Start with S1 diagnoses
scid1 = scid[grep("S1",scid$Subject.ID),]

dim(scid1)

```

```{r}
# merge with n=157 dataset
dwide = read.csv("../Data/Merged_Data/Merged_Data_Wide_2024-04-16.csv",stringsAsFactors = FALSE, header = TRUE)
dim(dwide)
names(dwide)

dwide2 = dwide[dwide$participant!="RRAY001" & dwide$participant!="RRAY146",]
dim(dwide2)

allscid = merge(dwide2, scid1, all.x = TRUE)
dim(allscid)
```

Start with S1 Data
```{r}

# easier way...
scid_print = function(x) {
  cur = paste0("CURRENT.",x)
  past = paste0("PAST.",x)
  print(table(allscid[cur]))
  print(sum(table(allscid[cur])))
  print(table(allscid[past]))
  print(sum(table(allscid[past])))
}

```


```{r}
# total should = 157 for each

# Mood disorders
scid_print("Major.Depressive.Disorder")
scid_print("Persistent.Depressive.Disorder") # 156
scid_print("Bipolar.Disorder.I")
scid_print("Bipolar.Disorder.II")
scid_print("Bipolar.NOS")

# Anxiety disorders
scid_print("Agoraphobia") # 149
scid_print("Generalized.Anxiety.Disorder") # 151
scid_print("Panic.Disorder") # 147, 148
scid_print("Social.Anxiety") # 148

# Alcohol & Substance
scid_print("Alcohol.Use.Disorder") # 153
scid_print("Alcohol.Severity")
scid_print("Substance.Use.Disorder") # 153
scid_print("Substance.Severity")

# eating disorders
scid_print("Anorexia.Nervosa") # 153
scid_print("Bulimia.Nervosa") # 152
scid_print("Binge.Eating.Disorder") # 152

# others
scid_print("ADHD") # 143, 141
scid_print("Obsessive.Compulsive.Disorder") # 150, 151
scid_print("PTSD") # 147, 146
```
